Feature: CreditSale_UpdateCreditSale API

  Scenario: test CreditSale UpdateCreditSale API
    Given url saleUrl
    Given path "/api/CreditSale/UpdateCreditSale"
    Given request
      """
        {
            "CompCode": "B",
            "BrnCode": "003",
            "LocCode": "001",
            "DocNo": "CR003-23060001",
            "DocType": "CreditSale",
            "DocStatus": "Active",
            "DocDate": "2023-06-24T17:00:00.000Z",
            "Period": "",
            "RefNo": "",
            "QtNo": null,
            "CustCode": "000001",
            "CustName": ". ดอยสะเก็ด",
            "CustAddr1": "175 หมู่3 ต.ทุ่งหลวง อ.ดอยสะเก็ด จ.เชียงใหม่",
            "CustAddr2": "อ.ดอยสะเก็ด จ.เชียงใหม่",
            "ItemCount": 0,
            "Remark": null,
            "Currency": "THB",
            "CurRate": 1,
            "SubAmt": 103.8,
            "SubAmtCur": 103.8,
            "DiscRate": null,
            "DiscAmt": 0,
            "DiscAmtCur": 0,
            "TotalAmt": 103.8,
            "TotalAmtCur": 103.8,
            "TaxBaseAmt": 97.00934579439252,
            "TaxBaseAmtCur": 97.00934579439252,
            "VatRate": 0,
            "VatAmt": 6.790654205607476,
            "VatAmtCur": 6.790654205607476,
            "NetAmt": 103.8,
            "NetAmtCur": 103.8,
            "TxNo": null,
            "Post": "N",
            "RunNumber": 1,
            "DocPattern": "CR003-2306####",
            "Guid": "191427dd-03da-4f16-b112-c346714e259f",
            "CreatedBy": "10040371",
            "CreatedDate": "2023-07-12T13:19:16.467",
            "UpdatedBy": "10040371",
            "UpdatedDate": "2023-07-12T13:25:18.853",
            "SalCreditsaleDt": [
                {
                    "BrnCode": "003",
                    "CompCode": "B",
                    "DiscAmt": 0,
                    "DiscAmtCur": 0,
                    "DiscHdAmt": 0,
                    "DiscHdAmtCur": 0,
                    "DocNo": "CR003-23060001",
                    "DocType": "CreditSale",
                    "IsFree": false,
                    "ItemQty": 1,
                    "LicensePlate": "ssa",
                    "LocCode": "001",
                    "MeterFinish": 0,
                    "MeterStart": 0,
                    "Mile": 2,
                    "PdId": "000002",
                    "PdName": "เบนซิน",
                    "PoNo": "sa",
                    "RefPrice": 0,
                    "RefPriceCur": 0,
                    "SeqNo": 1,
                    "StockQty": 1,
                    "SubAmt": 41.68,
                    "SubAmtCur": 41.68,
                    "SumItemAmt": 41.68,
                    "SumItemAmtCur": 41.68,
                    "TaxBaseAmt": 38.953271028037385,
                    "TaxBaseAmtCur": 38.953271028037385,
                    "TotalAmt": 41.68,
                    "TotalAmtCur": 41.68,
                    "UnitBarcode": "000002",
                    "UnitId": "001",
                    "UnitName": "ลิตร",
                    "UnitPrice": 41.68,
                    "UnitPriceCur": 41.68,
                    "VatAmt": 2.7267289719626167,
                    "VatAmtCur": 2.7267289719626167,
                    "VatRate": 7,
                    "VatType": "VI",
                    "GroupId": "0000"
                },
                {
                    "BrnCode": "003",
                    "CompCode": "B",
                    "DiscAmt": 0,
                    "DiscAmtCur": 0,
                    "DiscHdAmt": 0,
                    "DiscHdAmtCur": 0,
                    "DocNo": "CR003-23060001",
                    "DocType": "CreditSale",
                    "IsFree": false,
                    "ItemQty": 2,
                    "LicensePlate": "aada",
                    "LocCode": "001",
                    "MeterFinish": 0,
                    "MeterStart": 0,
                    "Mile": 2,
                    "PdId": "000001",
                    "PdName": "ดีเซล B7",
                    "PoNo": "ss",
                    "RefPrice": 0,
                    "RefPriceCur": 0,
                    "SeqNo": 2,
                    "StockQty": 2,
                    "SubAmt": 62.12,
                    "SubAmtCur": 62.12,
                    "SumItemAmt": 62.12,
                    "SumItemAmtCur": 62.12,
                    "TaxBaseAmt": 58.05607476635514,
                    "TaxBaseAmtCur": 58.05607476635514,
                    "TotalAmt": 62.12,
                    "TotalAmtCur": 62.12,
                    "UnitBarcode": "000001",
                    "UnitId": "001",
                    "UnitName": "ลิตร",
                    "UnitPrice": 31.06,
                    "UnitPriceCur": 31.06,
                    "VatAmt": 4.063925233644859,
                    "VatAmtCur": 4.063925233644859,
                    "VatRate": 7,
                    "VatType": "VI",
                    "GroupId": "0000"
                }
            ],
            "CitizenId": "",
            "EmpCode": "",
            "EmpName": ""
        }
      """
    When method PUT
    Then status 200
    Then print response